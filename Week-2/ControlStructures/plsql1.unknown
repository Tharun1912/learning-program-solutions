-- Scenario 1: Apply 1% discount to interest rates for customers above 60
DO $$
DECLARE
    rec RECORD;
BEGIN
    FOR rec IN
        SELECT L.LoanID, L.InterestRate
        FROM Loans L
        JOIN Customers C ON C.CustomerID = L.CustomerID
        WHERE C.Age > 60
    LOOP
        UPDATE Loans
        SET InterestRate = rec.InterestRate - 1
        WHERE LoanID = rec.LoanID;

        RAISE NOTICE '1%% discount applied to loan ID %', rec.LoanID;
    END LOOP;
END $$;
